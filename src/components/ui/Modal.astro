---
interface Props {
  id: string;
  title: string;
  class?: string;
}

const { id, title, class: className } = Astro.props;
---

<dialog
  id={id}
  class:list={[
    "fixed inset-0 z-50 p-0 m-auto backdrop:bg-black/50 overflow-hidden",
    "w-[90%] max-w-md rounded-[var(--m3-radius-xl)] bg-[var(--m3-sys-surface)] text-[var(--m3-sys-on-surface)] shadow-[var(--m3-elevation-2)]",
    className,
  ]}
>
  <div class="flex flex-col h-full">
    <header
      class="px-6 py-4 flex items-center justify-between border-b border-[var(--m3-sys-light-outline)]/10"
    >
      <h2 class="text-xl font-semibold text-[var(--m3-sys-light-on-surface)]">
        {title}
      </h2>
      <button
        onclick={`document.getElementById('${id}').close()`}
        class="p-2 rounded-full hover:bg-[var(--m3-sys-light-surface-variant)]/50 text-[var(--m3-sys-light-on-surface-variant)]"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><line x1="18" y1="6" x2="6" y2="18"></line><line
            x1="6"
            y1="6"
            x2="18"
            y2="18"></line></svg
        >
      </button>
    </header>
    <div class="p-6 overflow-y-auto">
      <slot />
    </div>
  </div>
</dialog>

<style>
  dialog::backdrop {
    animation: fadeIn 0.3s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  dialog[open] {
    animation: slideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  @keyframes slideUp {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
</style>
